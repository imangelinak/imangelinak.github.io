<div id="giscus-container"></div>
<script>
  function loadGiscus(theme) {
    const container = document.getElementById('giscus-container');
    if (container) container.innerHTML = '';

    const script = document.createElement('script');
    script.src = 'https://giscus.app/client.js';
    script.setAttribute('data-repo', 'imangelinak/imangelinak.github.io');
    script.setAttribute('data-repo-id', 'R_kgDOPAvy_w');
    script.setAttribute('data-category', 'General');
    script.setAttribute('data-category-id', 'DIC_kwDOPAvy_84CsLxA');
    script.setAttribute('data-mapping', 'pathname');
    script.setAttribute('data-strict', '0');
    script.setAttribute('data-reactions-enabled', '1');
    script.setAttribute('data-emit-metadata', '0');
    script.setAttribute('data-input-position', 'bottom');
    script.setAttribute('data-theme',
      theme === 'dark'
        ? 'https://github.com/imangelinak/giscus-dark-.git'
        : 'light'
    );
    script.setAttribute('crossorigin', 'anonymous');
    script.setAttribute('async', '');
    container.appendChild(script);
  }

  const currentTheme = document.documentElement.getAttribute('data-theme') || 'preferred-color-scheme';
  loadGiscus(currentTheme);

  const observer = new MutationObserver(() => {
    const newTheme = document.documentElement.getAttribute('data-theme');
    loadGiscus(newTheme);
  });

  observer.observe(document.documentElement, { attributes: true });
</script>
